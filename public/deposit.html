<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard - Jayglo CellMoni Agent</title>
<link rel="stylesheet" href="css/style.css">
<style>
body { font-family: Arial, sans-serif; background: linear-gradient(120deg, #f6d365, #fda085); color: #333; }
.header { text-align: center; padding: 20px; animation: fadeInDown 1s; }
.navbar { display: flex; justify-content: center; gap: 20px; margin: 20px 0; animation: fadeIn 1.5s; }
.navbar button { padding: 10px 15px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; transition: 0.3s; }
.navbar button:hover { opacity: 0.8; }
.dashboard-container { max-width: 800px; margin: auto; padding: 20px; background: rgba(255,255,255,0.9); border-radius: 10px; box-shadow: 0 0 15px rgba(0,0,0,0.2); animation: fadeInUp 1s; }
.card { background: #ffb347; padding: 20px; margin: 10px 0; border-radius: 10px; text-align: center; color: white; font-weight: bold; animation: fadeIn 1s; }
.card h2 { margin: 0; }
.footer { text-align: center; margin-top: 20px; }
@keyframes fadeInDown { from {opacity:0; transform: translateY(-50px);} to {opacity:1; transform:translateY(0);} }
@keyframes fadeInUp { from {opacity:0; transform: translateY(50px);} to {opacity:1; transform:translateY(0);} }
@keyframes fadeIn { from {opacity:0;} to {opacity:1;} }
</style>
</head>
<body>

<div class="header">
    <h1>Jayglo CellMoni Agent Dashboard</h1>
</div>

<div class="navbar">
    <button onclick="location.href='deposit.html'">Deposit</button>
    <button onclick="location.href='withdraw.html'">Withdraw</button>
    <button onclick="location.href='history.html'">Transaction History</button>
    <button onclick="logout()">Logout</button>
</div>

<div class="dashboard-container">
    <div class="card">
        <h2>Welcome, <span id="usernameDisplay">User</span></h2>
    </div>
    <div class="card">
        <h2>Live Users: <span id="liveUsers">0</span></h2>
    </div>
</div>

<div class="footer">
    <p>Jayglo CellMoni Agent &copy; 2025</p>
</div>

<script>
// Sample user data (replace with real session logic)
let currentUser = { username: "Guest" };
document.getElementById("usernameDisplay").innerText = currentUser.username;

// Fetch live user count
async function fetchLiveUsers() {
    const res = await fetch("/live-users");
    const data = await res.json();
    document.getElementById("liveUsers").innerText = data.count;
}
fetchLiveUsers();
setInterval(fetchLiveUsers, 5000); // update every 5 sec

function logout() {
    alert("Logged out successfully!");
    window.location.href = "login.html";
}
</script>

</body>
</html>
